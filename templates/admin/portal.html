{% extends "base.html" %}
{% block title %}Admin Portal | PittState-Connect{% endblock %}

{% block content %}
<!-- ============================================================
     ðŸ§‘â€ðŸ’¼ ADMIN ANALYTICS PORTAL
============================================================ -->
<section class="section text-center fade-in">
  <h1 class="text-5xl font-heading text-crimson mb-4">Administrative Analytics Dashboard</h1>
  <p class="text-gray max-w-2xl mx-auto mb-10">
    Real-time insights into university engagement, scholarship distribution, and employer activity.
  </p>
</section>

<!-- ============================================================
     ðŸ“Š KPI CARDS
============================================================ -->
<section class="section-light py-16 fade-in">
  <div class="grid grid-cols-1 md:grid-cols-4 gap-8 max-w-6xl mx-auto">
    <div class="card p-6 text-center">
      <h3 class="text-sm uppercase text-gray mb-2">Total Users</h3>
      <p class="text-4xl font-heading text-crimson">{{ stats.users or 3240 }}</p>
    </div>
    <div class="card p-6 text-center">
      <h3 class="text-sm uppercase text-gray mb-2">Active Scholarships</h3>
      <p class="text-4xl font-heading text-crimson">{{ stats.scholarships or 148 }}</p>
    </div>
    <div class="card p-6 text-center">
      <h3 class="text-sm uppercase text-gray mb-2">Jobs Posted</h3>
      <p class="text-4xl font-heading text-crimson">{{ stats.jobs or 312 }}</p>
    </div>
    <div class="card p-6 text-center">
      <h3 class="text-sm uppercase text-gray mb-2">Monthly Engagement</h3>
      <p class="text-4xl font-heading text-crimson">{{ stats.engagement or "82%" }}</p>
    </div>
  </div>
</section>

<!-- ============================================================
     ðŸ“ˆ CHART PLACEHOLDER
============================================================ -->
<section class="section py-16 fade-in">
  <h2 class="text-3xl font-heading text-crimson text-center mb-8">Engagement Over Time</h2>
  <div class="max-w-5xl mx-auto bg-white p-6 rounded-xl shadow-md dark:bg-[#1e1e1e]">
    <canvas id="engagementChart" height="120"></canvas>
  </div>
</section>

<!-- ============================================================
     ðŸ§  AI INSIGHTS
============================================================ -->
<section class="section-dark text-center py-16 fade-in">
  <h2 class="text-3xl font-heading text-gold mb-4">AI-Generated Insights</h2>
  <p class="text-white max-w-2xl mx-auto mb-8">
    Our AI engine summarizes key performance indicators for PSU administration.
  </p>
  <div class="max-w-3xl mx-auto bg-white text-left p-6 rounded-lg shadow-md dark:bg-[#1e1e1e] dark:text-gray">
    <ul class="list-disc pl-6 space-y-2 text-gray">
      <li>Student engagement up <strong>12%</strong> since Fall semester.</li>
      <li>Scholarship participation rose <strong>18%</strong> following Smart Match rollout.</li>
      <li>Employer sponsorships increased by <strong>25%</strong> year-over-year.</li>
    </ul>
  </div>
  <a href="{{ url_for('admin_bp.export_report') }}" class="btn btn-gold mt-8">Export Full Report</a>
</section>

<script>
document.addEventListener("DOMContentLoaded", () => {
  const ctx = document.getElementById("engagementChart");
  if (ctx && window.Chart) {
    new Chart(ctx, {
      type: "line",
      data: {
        labels: ["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct"],
        datasets: [{
          label: "Engagement %",
          data: [70,72,74,77,79,82,83,84,85,87],
          borderColor: "#a6192e",
          backgroundColor: "rgba(166,25,46,0.15)",
          tension: 0.4,
          fill: true
        }]
      },
      options: { responsive: true, scales: { y: { beginAtZero: true, max:100 } } }
    });
  }
});
</script>
{% endblock %}
