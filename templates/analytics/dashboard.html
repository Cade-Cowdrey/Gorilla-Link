{% extends "base.html" %}
{% block title %}Analytics Dashboard | PittState-Connect{% endblock %}
{% block content %}
<section class="bg-gray-50 min-h-screen py-10 px-4 sm:px-8 lg:px-16">
  <div class="container mx-auto">
    <div class="flex flex-col md:flex-row justify-between items-center mb-10">
      <div>
        <h1 class="text-4xl font-bold text-crimson mb-3">📊 Analytics Dashboard</h1>
        <p class="text-gray-700 max-w-2xl">
          Gain real-time insight into engagement across <strong>departments</strong>, <strong>careers</strong>, and <strong>scholarships</strong>.  
          Track views, unique visitors, and average engagement time to measure student and alumni involvement.
        </p>
      </div>
      <div class="mt-6 md:mt-0">
        <a href="{{ safe_url_for('departments_bp.index') }}"
           class="btn btn-gold text-crimson px-5 py-2 rounded-full hover:bg-crimson hover:text-white transition">
          ← Back to Departments
        </a>
      </div>
    </div>

    <div class="grid gap-8 md:grid-cols-2 lg:grid-cols-3">
      {% for card in cards %}
      <div class="bg-white rounded-2xl shadow hover:shadow-xl transition p-6">
        <h3 class="text-xl font-semibold text-crimson mb-2">{{ card.title }}</h3>
        <p class="text-gray-700 text-sm mb-4">Performance over the last {{ card.metrics.days or 7 }} days</p>
        <div class="space-y-2 text-sm">
          <p>👁️ <span class="font-semibold text-crimson">{{ card.metrics.views }}</span> total views</p>
          <p>🧍‍♂️ <span class="font-semibold text-crimson">{{ card.metrics.unique_users }}</span> unique users</p>
          <p>⏱️ <span class="font-semibold text-crimson">{{ card.metrics.avg_time_sec }}</span> sec avg time</p>
        </div>
      </div>
      {% else %}
      <p class="text-gray-600 col-span-full">No analytics data available.</p>
      {% endfor %}
    </div>

    <div class="mt-16 bg-gradient-to-r from-crimson to-gold text-white rounded-2xl p-8 shadow-lg">
      <h2 class="text-2xl font-bold mb-3">📈 Insights & Trends</h2>
      <p class="text-white/90 mb-6">
        These analytics drive smarter outreach, funding, and student engagement strategies.  
        Admin dashboards can visualize user retention, scholarship impact, and alumni interaction rates.
      </p>

      <div class="grid md:grid-cols-3 gap-6 text-sm text-white/90">
        <div class="bg-white/10 rounded-xl p-4 shadow">
          <h3 class="font-semibold mb-1 text-white">Engagement Rate</h3>
          <p>↑ {{ (home_stats.views or 0) | default(0, true) }}% growth week-over-week</p>
        </div>
        <div class="bg-white/10 rounded-xl p-4 shadow">
          <h3 class="font-semibold mb-1 text-white">Alumni Activity</h3>
          <p>Strong activity from employer and donor accounts this month.</p>
        </div>
        <div class="bg-white/10 rounded-xl p-4 shadow">
          <h3 class="font-semibold mb-1 text-white">Scholarship Awareness</h3>
          <p>Increased traffic on Scholarship Hub following Smart Match launch.</p>
        </div>
      </div>
    </div>

    <div class="mt-12 text-center">
      <a href="{{ safe_url_for('analytics_bp.page_summary', path='/', days=7) }}"
         class="btn btn-outline-crimson border-2 border-crimson text-crimson px-6 py-2 rounded-full hover:bg-crimson hover:text-white transition">
         🔎 View Detailed Page Stats
      </a>
    </div>
  </div>
</section>
{% endblock %}
