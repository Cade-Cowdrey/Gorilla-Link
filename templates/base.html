<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="theme-color" content="#a6192e">
  <title>{% block title %}PittState-Connect{% endblock %}</title>

  <!-- PSU Colors & Branding -->
  <link rel="stylesheet" href="{{ url_for('static', filename='css/psu-theme.css') }}">
  <link rel="icon" href="{{ url_for('static', filename='images/psu-logo.png') }}">
  <link rel="apple-touch-icon" href="{{ url_for('static', filename='images/pwa/icon-192.png') }}">
  <link rel="manifest" href="{{ url_for('static', filename='pwa/manifest.webmanifest') }}">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

  <!-- Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&family=Montserrat:wght@600;700&display=swap" rel="stylesheet">

  {% block head %}{% endblock %}
</head>
<body>
  <!-- ============================================================
       üü• NAVBAR
  ============================================================ -->
  <nav class="bg-white/90 backdrop-blur-lg shadow-md py-4 sticky top-0 z-50 transition-colors">
    <div class="container mx-auto px-6 flex justify-between items-center">
      <a href="{{ url_for('core_bp.home') }}" class="text-2xl font-heading text-crimson">PittState-Connect</a>
      <div class="flex gap-6 text-gray text-sm font-semibold">
        <a href="{{ url_for('core_bp.home') }}" class="hover:text-crimson">Home</a>
        <a href="{{ url_for('careers_bp.dashboard') }}" class="hover:text-crimson">Careers</a>
        <a href="{{ url_for('scholarships_bp.dashboard') }}" class="hover:text-crimson">Scholarships</a>
        <a href="{{ url_for('community_bp.feed') }}" class="hover:text-crimson">Community</a>
        <a href="{{ url_for('events_bp.list') }}" class="hover:text-crimson">Events</a>
        <a href="{{ url_for('analytics_bp.insights') }}" class="hover:text-crimson">Analytics</a>
        <a href="{{ url_for('profile_bp.dashboard') }}" class="hover:text-crimson">Profile</a>
        <a href="{{ url_for('messages_bp.inbox') }}" class="hover:text-crimson">Messages</a>
        <a href="{{ url_for('notifications_bp.center') }}" class="hover:text-crimson">Notifications</a>
        <a href="{{ url_for('admin_bp.portal') }}" class="hover:text-crimson">Admin</a>
        <a href="{{ url_for('system_bp.multicampus') }}" class="hover:text-crimson">Campuses</a>
        <a href="{{ url_for('pwa_bp.onboarding') }}" class="hover:text-crimson">Install App</a>
      </div>
    </div>
  </nav>

  <!-- ============================================================
       PAGE CONTENT
  ============================================================ -->
  <main class="min-h-screen fade-in">
    {% block content %}{% endblock %}
  </main>

  <!-- ============================================================
       FOOTER
  ============================================================ -->
  <footer class="text-center py-8">
    <p class="text-white text-sm">&copy; {{ current_year or 2025 }} Pittsburg State University ¬∑ Built with ‚ù§Ô∏è by PSU Students</p>
  </footer>

  <!-- ============================================================
       GLOBAL SCRIPTS
  ============================================================ -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script>
    // Dark mode toggle
    const toggle = document.createElement("button");
    toggle.id = "theme-toggle";
    toggle.innerHTML = "‚òÄÔ∏è";
    toggle.onclick = () => {
      document.body.classList.toggle("dark");
      toggle.innerHTML = document.body.classList.contains("dark") ? "üåô" : "‚òÄÔ∏è";
      localStorage.setItem("theme", document.body.classList.contains("dark") ? "dark" : "light");
    };
    document.body.appendChild(toggle);
    if (localStorage.getItem("theme") === "dark") document.body.classList.add("dark");

    // Register PWA
    if ("serviceWorker" in navigator) {
      window.addEventListener("load", () => {
        navigator.serviceWorker.register("{{ url_for('static', filename='pwa/service-worker.js') }}");
      });
    }
  </script>
  {% block scripts %}{% endblock %}
</body>
</html>
