{% extends "base.html" %}
{% block title %}Discussion Boards | PittState-Connect{% endblock %}
{% block content %}
<section class="section fade-in">
  <div class="container mx-auto">
    <h1 class="text-crimson font-heading text-center mb-6">Discussion Boards</h1>
    <p class="text-gray text-center mb-8">Ask questions, share advice, and connect across departments.</p>

    <!-- Threads -->
    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
      {% for thread in threads %}
      <div class="card p-5 fade-in">
        <h3 class="font-heading text-crimson mb-2">{{ thread.topic }}</h3>
        <p class="text-gray mb-2">{{ thread.posts }} posts</p>
        <small class="text-gray">Last updated {{ thread.updated }}</small>
        <div class="mt-4 text-right">
          <button class="btn btn-gold">View Thread</button>
        </div>
      </div>
      {% endfor %}
    </div>

    <!-- Create New Thread -->
    <div class="card mt-10 p-5 fade-in max-w-2xl mx-auto">
      <h3 class="font-heading text-crimson mb-3">Start a New Discussion</h3>
      <form id="newThreadForm">
        <input type="text" class="w-full p-3 mb-3 rounded border border-gray-300" placeholder="Thread title">
        <textarea class="w-full p-3 mb-3 rounded border border-gray-300" rows="4" placeholder="Your question or topic..."></textarea>
        <button type="submit" class="btn btn-crimson w-full">Post Discussion</button>
      </form>
    </div>

    <!-- Optional Enhancement: AI Topic Recommender -->
    <div class="card mt-10 p-5 fade-in text-center">
      <h3 class="font-heading text-crimson mb-3">AI Topic Recommender</h3>
      <p class="text-gray mb-3">Not sure what to discuss? Let AI suggest trending campus topics.</p>
      <button id="aiTopicBtn" class="btn btn-gold">Get Suggestions</button>
      <ul id="aiTopics" class="mt-3 hidden text-left list-disc pl-6 text-gray"></ul>
    </div>
  </div>
</section>
<script>
document.getElementById('aiTopicBtn').addEventListener('click', async () => {
  const res = await fetch('/api/ai/topics');
  const data = await res.json();
  const list = document.getElementById('aiTopics');
  list.innerHTML = data.topics.map(t => `<li>${t}</li>`).join('');
  list.classList.remove('hidden');
});
</script>
{% endblock %}
