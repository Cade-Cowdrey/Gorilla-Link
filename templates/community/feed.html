{% extends "base.html" %}
{% block title %}Community Feed | PittState-Connect{% endblock %}

{% block content %}
<!-- ============================================================
     🦍 COMMUNITY FEED
============================================================ -->
<section class="section text-center fade-in">
  <h1 class="text-5xl font-heading text-crimson mb-4">The Jungle Report</h1>
  <p class="text-gray max-w-2xl mx-auto mb-8">
    Stay connected with fellow Gorillas — explore campus updates, student stories, and alumni insights.
  </p>

  <form method="GET" action="{{ url_for('community_bp.feed') }}" class="max-w-xl mx-auto flex mb-10">
    <input type="text" name="q" placeholder="Search posts..." 
           class="flex-1 border border-gray-300 rounded-l-lg p-3 focus:outline-none focus:ring-2 focus:ring-crimson">
    <button type="submit" class="btn btn-crimson rounded-l-none">Search</button>
  </form>
</section>

<!-- ============================================================
     🗞️ POST GRID
============================================================ -->
<section class="section-light py-16 fade-in">
  <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-10 max-w-6xl mx-auto">
    {% for post in posts %}
    <div class="card p-6">
      <h3 class="text-2xl font-heading text-crimson mb-2">{{ post.title }}</h3>
      <p class="text-sm text-gray mb-3">by {{ post.author_name }} · {{ post.timestamp.strftime('%b %d, %Y') }}</p>
      {% if post.image_url %}
      <img src="{{ post.image_url }}" alt="Post image" class="rounded-lg mb-4 w-full h-48 object-cover">
      {% endif %}
      <p class="text-gray mb-4">{{ post.content[:180] }}...</p>
      <a href="{{ url_for('community_bp.post_detail', post_id=post.id) }}" class="btn btn-gold">Read More</a>
    </div>
    {% else %}
    <div class="col-span-3 text-center text-gray">No posts available yet — be the first to share something!</div>
    {% endfor %}
  </div>
</section>

<!-- ============================================================
     🧠 AI COMMUNITY INSIGHTS
============================================================ -->
<section class="section-dark text-center py-16 fade-in">
  <h2 class="text-3xl font-heading text-gold mb-4">AI Campus Highlights</h2>
  <p class="text-white max-w-2xl mx-auto mb-8">
    Our assistant summarizes trending campus topics and sentiment from current posts.
  </p>
  <div class="max-w-3xl mx-auto bg-white text-left p-6 rounded-lg shadow-md dark:bg-[#1e1e1e] dark:text-gray">
    <ul class="list-disc pl-6 space-y-2 text-gray">
      <li>Most discussed: <strong>Career Fair 2025</strong></li>
      <li>Positive trend: Alumni mentorship participation ↑ <strong>18%</strong></li>
      <li>Top topic: <strong>Scholarship success stories</strong></li>
    </ul>
  </div>
</section>
{% endblock %}
