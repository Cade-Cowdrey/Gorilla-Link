{% extends "base.html" %}
{% block title %}{{ dept.name }} | PittState-Connect{% endblock %}
{% block content %}

<section class="container mx-auto px-4 py-8">
  <!-- HEADER -->
  <div class="text-center mb-10">
    <h1 class="text-4xl font-bold text-crimson mb-3">{{ dept.name }}</h1>
    <p class="text-gray-600 max-w-2xl mx-auto">
      {{ dept.description or "Learn more about this academic department at Pittsburg State University, its faculty, and its programs." }}
    </p>
    <div class="mt-6 flex justify-center gap-4">
      <a href="{{ safe_url_for('departments_bp.index') }}"
         class="px-4 py-2 bg-crimson text-white rounded-xl shadow-md hover:bg-gold hover:text-crimson transition">
        ← Back to Departments
      </a>
      <a href="{{ safe_url_for('analytics_bp.index') }}"
         class="px-4 py-2 bg-gold text-crimson rounded-xl shadow-md hover:bg-crimson hover:text-gold transition">
        View Analytics
      </a>
    </div>
  </div>

  <!-- FACULTY GRID -->
  <div class="mt-8">
    <h2 class="text-2xl font-semibold text-crimson mb-6 text-center">
      Faculty Members
    </h2>

    {% if faculty %}
    <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6">
      {% for member in faculty %}
      <div class="bg-white rounded-2xl shadow-md p-6 border-t-4 border-gold hover:shadow-lg transition transform hover:-translate-y-1">
        <div class="flex items-center mb-3">
          <img src="{{ member.profile_image_url or url_for('static', filename='img/default-avatar.png') }}"
               alt="{{ member.name }}" class="w-14 h-14 rounded-full mr-3 border border-gray-300 object-cover">
          <div>
            <h3 class="font-semibold text-crimson text-lg">{{ member.name }}</h3>
            <p class="text-gray-500 text-sm">{{ member.title or "Faculty Member" }}</p>
          </div>
        </div>

        <p class="text-gray-700 text-sm mb-3">
          {{ member.bio or "No biography available for this faculty member." }}
        </p>

        <div class="flex justify-between items-center mt-4">
          {% if member.email %}
          <a href="mailto:{{ member.email }}"
             class="text-gold hover:text-crimson text-sm font-semibold transition">
            Email →
          </a>
          {% endif %}
          <span class="text-xs text-gray-500">
            Updated {{ member.updated_at.strftime('%b %d, %Y') if member.updated_at else "Recently" }}
          </span>
        </div>
      </div>
      {% endfor %}
    </div>
    {% else %}
    <div class="text-center text-gray-500 mt-10">
      <p>No faculty members found for this department.</p>
      <a href="{{ safe_url_for('departments_bp.index') }}"
         class="text-crimson hover:text-gold font-medium mt-2 inline-block">
        ← Return to All Departments
      </a>
    </div>
    {% endif %}
  </div>

  <!-- FOOTER INFO -->
  <div class="mt-12 text-center text-gray-500 text-sm">
    <p>
      Analytics last updated:
      <span class="font-medium text-crimson">
        {{ dept.updated_at.strftime('%b %d, %Y') if dept.updated_at else "Recently" }}
      </span>
    </p>
    <p class="mt-2">
      <a href="{{ safe_url_for('analytics_bp.index') }}"
         class="text-gold hover:text-crimson font-semibold transition">
        Explore Department Insights →
      </a>
    </p>
  </div>
</section>

{% endblock %}
