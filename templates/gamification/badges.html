{% extends "base_psu.html" %}

{% block title %}Badges & Achievements - PSU Connect{% endblock %}

{% block content %}
<div class="container" style="max-width: 1200px; padding: 2rem 0;">
    <div style="text-align: center; margin-bottom: 3rem;">
        <h1 style="color: var(--psu-crimson); margin-bottom: 1rem;">
            <i class="fas fa-medal"></i> Badges & Achievements
        </h1>
        <p style="font-size: 1.1rem; color: #6c757d;">Unlock achievements as you progress in your career journey</p>
    </div>

    <!-- User Stats -->
    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 1.5rem; margin-bottom: 3rem;">
        <div class="psu-card" style="text-align: center; padding: 1.5rem;">
            <div style="font-size: 2.5rem; font-weight: bold; color: var(--psu-crimson);">{{ earned_count }}</div>
            <div style="color: #6c757d;">Badges Earned</div>
        </div>
        <div class="psu-card" style="text-align: center; padding: 1.5rem;">
            <div style="font-size: 2.5rem; font-weight: bold; color: var(--psu-gold);">{{ user_points }}</div>
            <div style="color: #6c757d;">Total Points</div>
        </div>
        <div class="psu-card" style="text-align: center; padding: 1.5rem;">
            <div style="font-size: 2.5rem; font-weight: bold; color: #28a745;">{{ current_level }}</div>
            <div style="color: #6c757d;">Current Level</div>
        </div>
        <div class="psu-card" style="text-align: center; padding: 1.5rem;">
            <div style="font-size: 2.5rem; font-weight: bold; color: #007bff;">{{ current_streak }}</div>
            <div style="color: #6c757d;">Day Streak ðŸ”¥</div>
        </div>
    </div>

    <!-- Quick Links -->
    <div style="display: flex; gap: 1rem; margin-bottom: 2rem; flex-wrap: wrap;">
        <a href="/gamification/leaderboard" class="btn-secondary">
            <i class="fas fa-trophy"></i> Leaderboard
        </a>
        <a href="/gamification/profile-progress" class="btn-secondary">
            <i class="fas fa-tasks"></i> Profile Progress
        </a>
        <a href="/gamification/streaks" class="btn-secondary">
            <i class="fas fa-fire"></i> Daily Streaks
        </a>
    </div>

    <!-- Badges Grid -->
    <div style="display: grid; grid-template-columns: repeat(auto-fill, minmax(250px, 1fr)); gap: 1.5rem;">
        {% for badge in badges %}
        <div class="psu-card" style="padding: 1.5rem; text-align: center; {% if badge.id in earned_badge_ids %}border: 2px solid var(--psu-gold); background: linear-gradient(135deg, rgba(253,181,21,0.05) 0%, rgba(139,26,26,0.05) 100%);{% else %}opacity: 0.6;{% endif %}">
            <!-- Badge Icon -->
            <div style="font-size: 3rem; margin-bottom: 1rem;">
                {% if badge.id in earned_badge_ids %}
                    <i class="{{ badge.icon }}" style="color: var(--psu-gold);"></i>
                {% else %}
                    <i class="{{ badge.icon }}" style="color: #ccc;"></i>
                {% endif %}
            </div>

            <!-- Badge Name -->
            <h3 style="color: var(--psu-crimson); margin: 0 0 0.5rem 0; font-size: 1.2rem;">{{ badge.name }}</h3>

            <!-- Badge Description -->
            <p style="font-size: 0.9rem; color: #6c757d; margin-bottom: 1rem;">{{ badge.description }}</p>

            <!-- Points -->
            <div style="display: inline-block; background: var(--psu-gold); color: white; padding: 0.25rem 0.75rem; border-radius: 1rem; font-weight: 600; font-size: 0.9rem; margin-bottom: 1rem;">
                {{ badge.points }} points
            </div>

            <!-- Status -->
            {% if badge.id in earned_badge_ids %}
                <div style="color: #28a745; font-weight: 600; margin-top: 0.5rem;">
                    <i class="fas fa-check-circle"></i> Earned!
                    {% if earned_dates.get(badge.id) %}
                        <div style="font-size: 0.8rem; color: #6c757d; margin-top: 0.25rem;">
                            {{ earned_dates[badge.id].strftime('%b %d, %Y') }}
                        </div>
                    {% endif %}
                </div>
            {% else %}
                <div style="color: #6c757d; font-size: 0.9rem; margin-top: 0.5rem;">
                    <i class="fas fa-lock"></i> Not yet earned
                </div>
            {% endif %}
        </div>
        {% endfor %}
    </div>

    <!-- Progress to Next Level -->
    <div class="psu-card" style="padding: 2rem; margin-top: 3rem;">
        <h3 style="color: var(--psu-crimson); margin: 0 0 1rem 0;">
            <i class="fas fa-level-up-alt"></i> Progress to Next Level
        </h3>
        <div style="display: flex; align-items: center; gap: 1rem; margin-bottom: 0.5rem;">
            <div style="flex: 1; background: #e9ecef; border-radius: 1rem; height: 2rem; position: relative; overflow: hidden;">
                <div style="background: linear-gradient(90deg, var(--psu-crimson) 0%, var(--psu-gold) 100%); height: 100%; width: {{ (user_points % 1000) / 10 }}%; transition: width 0.5s;"></div>
            </div>
            <div style="font-weight: 600; color: var(--psu-crimson); min-width: 100px; text-align: right;">
                {{ user_points % 1000 }} / 1000 pts
            </div>
        </div>
        <p style="color: #6c757d; margin: 0; font-size: 0.9rem;">
            {{ 1000 - (user_points % 1000) }} points until level {{ (user_points // 1000) + 1 }}
        </p>
    </div>
</div>

<style>
.psu-card {
    transition: all 0.3s ease;
}

.psu-card:hover {
    transform: translateY(-5px);
    box-shadow: 0 8px 20px rgba(139, 26, 26, 0.15);
}
</style>
{% endblock %}
