{% extends "base_psu.html" %}

{% block title %}Leaderboard - PSU Connect{% endblock %}

{% block content %}
<div class="container" style="max-width: 900px; padding: 2rem 0;">
    <div style="text-align: center; margin-bottom: 3rem;">
        <h1 style="color: var(--psu-crimson); margin-bottom: 1rem;">
            <i class="fas fa-trophy"></i> Leaderboard
        </h1>
        <p style="font-size: 1.1rem; color: #6c757d;">Top career champions at PSU</p>
    </div>

    <!-- User's Current Rank -->
    {% if user_rank %}
    <div class="psu-card" style="padding: 1.5rem; margin-bottom: 2rem; background: linear-gradient(135deg, rgba(253,181,21,0.1) 0%, rgba(139,26,26,0.1) 100%); border: 2px solid var(--psu-gold);">
        <h3 style="color: var(--psu-crimson); margin: 0 0 1rem 0;">Your Rank</h3>
        <div style="display: flex; align-items: center; gap: 1rem;">
            <div style="font-size: 3rem; font-weight: bold; color: var(--psu-gold); min-width: 80px; text-align: center;">
                #{{ user_rank }}
            </div>
            <div style="flex: 1;">
                <div style="font-weight: 600; font-size: 1.2rem; color: var(--psu-crimson);">{{ current_user.name }}</div>
                <div style="color: #6c757d;">{{ user_points }} points</div>
            </div>
            <div style="text-align: right;">
                <div style="font-weight: 600; color: var(--psu-crimson);">Level {{ user_level }}</div>
                <div style="font-size: 0.9rem; color: #6c757d;">{{ earned_badges }} badges</div>
            </div>
        </div>
    </div>
    {% endif %}

    <!-- Top 50 Users -->
    <div class="psu-card" style="padding: 0; overflow: hidden;">
        <div style="padding: 1.5rem; background: linear-gradient(135deg, var(--psu-crimson) 0%, var(--psu-gold) 100%);">
            <h3 style="color: white; margin: 0;">
                <i class="fas fa-crown"></i> Top 50 Career Champions
            </h3>
        </div>

        <div style="padding: 0;">
            {% for user in leaderboard %}
            <div style="display: flex; align-items: center; gap: 1rem; padding: 1rem 1.5rem; border-bottom: 1px solid #e9ecef; transition: background 0.2s;" 
                 onmouseover="this.style.background='#f8f9fa'" 
                 onmouseout="this.style.background='white'">
                
                <!-- Rank -->
                <div style="min-width: 60px; text-align: center;">
                    {% if loop.index == 1 %}
                        <span style="font-size: 2rem;">ðŸ¥‡</span>
                    {% elif loop.index == 2 %}
                        <span style="font-size: 2rem;">ðŸ¥ˆ</span>
                    {% elif loop.index == 3 %}
                        <span style="font-size: 2rem;">ðŸ¥‰</span>
                    {% else %}
                        <span style="font-size: 1.5rem; font-weight: bold; color: #6c757d;">#{{ loop.index }}</span>
                    {% endif %}
                </div>

                <!-- User Info -->
                <div style="flex: 1;">
                    <div style="font-weight: 600; color: var(--psu-crimson); font-size: 1.1rem;">
                        {{ user.name }}
                        {% if user.id == current_user.id %}
                            <span style="color: var(--psu-gold); font-size: 0.9rem;">(You)</span>
                        {% endif %}
                    </div>
                    <div style="font-size: 0.9rem; color: #6c757d;">
                        {{ user.major or 'Student' }}
                    </div>
                </div>

                <!-- Stats -->
                <div style="text-align: right; min-width: 150px;">
                    <div style="font-size: 1.3rem; font-weight: bold; color: var(--psu-gold);">
                        {{ user.total_points }} pts
                    </div>
                    <div style="font-size: 0.9rem; color: #6c757d;">
                        Level {{ user.total_points // 1000 }} â€¢ {{ user.badge_count }} badges
                    </div>
                </div>

                <!-- Profile Link -->
                <div>
                    <a href="/profile/{{ user.id }}" class="btn-secondary" style="padding: 0.5rem 1rem;">
                        <i class="fas fa-user"></i>
                    </a>
                </div>
            </div>
            {% endfor %}
        </div>
    </div>

    <!-- Motivation Box -->
    <div class="psu-card" style="padding: 1.5rem; margin-top: 2rem; text-align: center; background: linear-gradient(135deg, rgba(139,26,26,0.05) 0%, rgba(253,181,21,0.05) 100%);">
        <p style="font-size: 1.1rem; color: var(--psu-crimson); margin: 0;">
            <i class="fas fa-star"></i>
            <strong>Keep going!</strong> Complete your profile, apply to jobs, and help others to earn more points!
        </p>
    </div>
</div>
{% endblock %}
