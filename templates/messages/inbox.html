{% extends "base.html" %}
{% block title %}Messages | PittState-Connect{% endblock %}

{% block content %}
<!-- ============================================================
     ðŸ’¬ MESSAGES INBOX
============================================================ -->
<section class="section text-center fade-in">
  <h1 class="text-5xl font-heading text-crimson mb-4">Messages Inbox</h1>
  <p class="text-gray max-w-2xl mx-auto mb-8">
    Stay connected with classmates, faculty, and employers in one secure space.
  </p>
  <form method="GET" action="{{ url_for('messages_bp.inbox') }}" class="max-w-xl mx-auto flex mb-10">
    <input type="text" name="q" placeholder="Search conversations..." 
           class="flex-1 border border-gray-300 rounded-l-lg p-3 focus:outline-none focus:ring-2 focus:ring-crimson">
    <button type="submit" class="btn btn-crimson rounded-l-none">Search</button>
  </form>
</section>

<!-- ============================================================
     ðŸ“© MESSAGE LIST
============================================================ -->
<section class="section-light py-16 fade-in">
  <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-10 max-w-6xl mx-auto">
    {% for convo in conversations %}
    <div class="card p-6 flex flex-col justify-between">
      <div>
        <h3 class="text-xl font-heading text-crimson mb-2">{{ convo.participant_name }}</h3>
        <p class="text-gray text-sm mb-4">{{ convo.last_message[:120] }}...</p>
      </div>
      <div class="flex justify-between items-center">
        <a href="{{ url_for('messages_bp.thread', id=convo.id) }}" class="btn btn-gold">Open Chat</a>
        {% if convo.unread_count > 0 %}
        <span class="bg-crimson text-white text-xs px-3 py-1 rounded-full">{{ convo.unread_count }} new</span>
        {% endif %}
      </div>
    </div>
    {% else %}
    <div class="col-span-3 text-center text-gray">No messages yet. Start a new conversation!</div>
    {% endfor %}
  </div>
</section>

<!-- ============================================================
     ðŸ§  QUICK ACTIONS
============================================================ -->
<section class="section-dark text-center py-16 fade-in">
  <h2 class="text-3xl font-heading text-gold mb-4">Quick Actions</h2>
  <p class="text-white mb-6 max-w-2xl mx-auto">
    Send messages, connect with mentors, or start a group discussion instantly.
  </p>
  <a href="{{ url_for('messages_bp.new') }}" class="btn btn-gold mr-3">New Message</a>
  <a href="{{ url_for('community_bp.feed') }}" class="btn btn-crimson">View Community Feed</a>
</section>
{% endblock %}
