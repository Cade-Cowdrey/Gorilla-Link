<!-- templates/partials/analytics_digest_archive_body.html -->
<div class="card shadow-sm mb-4">
  <div class="card-body">
    <form class="d-flex flex-wrap mb-3" method="get">
      <input type="text" name="q" class="form-control form-control-sm me-2 mb-2" placeholder="Search by subject or email..." value="{{ q or '' }}">
      <button class="btn btn-danger btn-sm mb-2" type="submit">üîç Search</button>
    </form>

    {% if entries %}
    <div class="table-responsive">
      <table class="table table-sm align-middle">
        <thead class="table-danger">
          <tr>
            <th>Date Sent</th>
            <th>Subject</th>
            <th>To</th>
            <th>CC</th>
            <th>PDF Size</th>
            <th></th>
          </tr>
        </thead>
        <tbody>
          {% for e in entries %}
          <tr>
            <td>{{ e.created_at.strftime("%b %d, %Y %I:%M %p") }}</td>
            <td><strong>{{ e.subject }}</strong></td>
            <td>{{ e.to_email }}</td>
            <td>{{ e.cc_email or '-' }}</td>
            <td>{{ (e.pdf_bytes_len / 1024)|round(1) }} KB</td>
            <td><a href="{{ url_for('analytics_bp.digest_archive_detail', entry_id=e.id) }}" class="btn btn-sm btn-outline-danger">View</a></td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
    {% else %}
    <p class="text-muted mb-0">No Jungle Digest reports have been sent yet.</p>
    {% endif %}
  </div>
</div>
